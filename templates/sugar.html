<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç¨ Sweet Intake ‚Üí Water Needs Calculator</title>
    <meta name="description" content="Calculate how much extra water you need based on sugar intake. Get personalized hydration targets with health guidelines comparison.">
    <meta name="keywords" content="sugar intake calculator, extra water for sweets, sugar hydration needs, candy water requirements, dessert hydration guide, sugar consumption tracker, sweet treats hydration, glucose water balance, sugar dehydration effects, post-meal hydration, diabetes water intake, blood sugar hydration, sugar water needs calculator, sweet intake hydration, candy hydration calculator, dessert water requirements, sugar consumption hydration, glucose hydration tracker, sweet treats water needs, sugar dehydration calculator, post-dessert hydration, sugar water balance, sweet drinks hydration, candy bar water needs, chocolate hydration effects, ice cream water requirements, cake hydration calculator, cookies water needs, pastry hydration guide, sugar rush hydration, sweet snacks water intake, candy consumption tracker, dessert water calculator, sugar intake monitor, sweet treats tracker, glucose intake calculator, sugar content calculator, sweet foods hydration, sugar free hydration, artificial sweetener water, natural sugar hydration, fruit sugar water needs, added sugar calculator, hidden sugar tracker, sugar label calculator, sweet beverage hydration, sugary drinks water, soda sugar content, juice sugar calculator, energy drink sugar, sports drink sugar, candy nutrition calculator, dessert nutrition tracker, sugar health calculator, diabetes sugar tracker, blood glucose hydration, insulin sugar calculator, prediabetes hydration, sugar metabolism water, sugar processing hydration, sweet tooth calculator, sugar addiction tracker, sugar detox hydration, low sugar hydration, high sugar intake water, sugar moderation calculator, healthy sugar intake, sugar wellness tracker, sweet balance calculator">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíß</text></svg>">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7136012713043150"
         crossorigin="anonymous"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    
    <style>
        /* Navigation and responsive styles */
        body {
            margin: 0;
            transition: margin-left 0.3s ease;
        }

        /* Desktop: Apply side navigation margin */
        @media (min-width: 769px) {
            body {
                margin-left: 250px;
            }

            body.nav-closed {
                margin-left: 0;
            }
        }

        /* Toggle Button */
        .nav-toggle {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: #0ea5e9;
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem;
            min-height: 40px;
            min-width: 40px;
            contain: layout style;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            transform: translateZ(0);
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            display: none;
            flex-direction: column;
            gap: 0.25rem;
        }

        .nav-toggle.show {
            display: flex;
        }

        .nav-toggle:hover {
            background: #0284c7;
            transform: scale(1.05);
        }

        .hamburger {
            width: 20px;
            height: 2px;
            background: white;
            transition: all 0.2s ease;
        }

        .nav-toggle.active .hamburger:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .nav-toggle.active .hamburger:nth-child(2) {
            opacity: 0;
        }

        .nav-toggle.active .hamburger:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Side Navigation */
        .side-nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .side-nav.closed {
            transform: translateX(-100%);
        }

        .nav-header {
            padding: 2rem 1.5rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 0.25rem;
            border-radius: 0.25rem;
        }

        .nav-close:hover {
            background: #f8fafc;
            color: #1e293b;
        }

        .nav-header h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }

        .nav-menu {
            list-style: none;
            padding: 1rem 0;
            margin: 0;
        }

        .nav-menu li {
            margin: 0;
        }

        .nav-link {
            display: block;
            padding: 1rem 1.5rem;
            color: #64748b;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: #f8fafc;
            color: #0ea5e9;
        }

        .nav-link.active {
            background: rgba(14, 165, 233, 0.1);
            color: #0ea5e9;
            border-left-color: #0ea5e9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            body {
                margin-left: 0 !important;
            }
            
            .side-nav {
                transform: translateX(-100%);
            }
            
            .side-nav.open {
                transform: translateX(0);
            }
            
            .nav-toggle {
                display: flex !important;
            }
            
            .grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        .card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .card h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #374151;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .helper {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.875rem;
            color: #1e40af;
            margin-top: 0.5rem;
        }
        
        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #0ea5e9;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0284c7;
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        .results {
            background: white;
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        
        .results.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .grid {
            display: grid;
            gap: 2rem;
        }
        
        @media (min-width: 768px) {
            .grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .converter {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 0.5rem;
            align-items: center;
            margin-top: 0.5rem;
        }
        
        .error {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .warning-box {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #92400e;
        }
        
        .tip-box {
            background: #dcfce7;
            border: 1px solid #16a34a;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #166534;
        }
        
        .summary-box {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Toggle Button -->
    <button class="nav-toggle" id="navToggle" onclick="toggleNavigation()">
        <span class="hamburger"></span>
        <span class="hamburger"></span>
        <span class="hamburger"></span>
    </button>

    <!-- Side Navigation -->
    <nav class="side-nav" id="sideNav">
        <div class="nav-header">
            <h3>üíß Calculators</h3>
            <button class="nav-close" onclick="closeNavigation()">‚úï</button>
        </div>
        <ul class="nav-menu">
            <li><a href="/" class="nav-link">üíß Water Calculator</a></li>
            <li><a href="/drinks" class="nav-link">‚òï Drinks Calculator</a></li>
            <li><a href="/sugar" class="nav-link active">üç¨ Sweet Calculator</a></li>
        </ul>
    </nav>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="title">üç¨ Sweet Calculator</h1>
                <p class="subtitle">Get personalized hydration advice based on your sugar intake</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <div class="grid">
                <!-- Personal Details -->
                <div class="card">
                    <h2>üë§ Personal Details</h2>
                    
                    <div class="form-group">
                        <label for="weight">Weight (kg) *</label>
                        <input type="number" id="weight" min="20" max="250" step="0.1" required>
                        <div id="weight-error" class="error" style="display: none;">Weight is required</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="age-group">Age Group *</label>
                        <select id="age-group" required>
                            <option value="">Select your age group</option>
                            <option value="child">üë∂ Child (5-12 years)</option>
                            <option value="teen">üßí Teen (13-18 years)</option>
                            <option value="adult">üë© Adult (19-64 years)</option>
                            <option value="senior">üë¥ Senior (65+ years)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="activity-level">Activity Level</label>
                        <select id="activity-level">
                            <option value="sedentary">üí§ Sedentary - Mostly sitting</option>
                            <option value="moderate" selected>üö∂ Moderate - Light exercise</option>
                            <option value="active">üèÉ Active - Regular exercise</option>
                        </select>
                    </div>
                </div>
                
                <!-- Context & Timing -->
                <div class="card">
                    <h2>‚è∞ Context & Timing</h2>
                    
                    <div class="form-group">
                        <label for="meal-timing">When did you eat most sugar today?</label>
                        <select id="meal-timing">
                            <option value="morning">üåÖ Morning (before noon)</option>
                            <option value="afternoon" selected>‚òÄÔ∏è Afternoon (noon - 6pm)</option>
                            <option value="evening">üåô Evening (after 6pm)</option>
                        </select>
                    </div>
                    
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="poor-sleep">
                            <label for="poor-sleep">üò¥ Had less than 6 hours sleep last night</label>
                        </div>
                    </div>
                </div>
                
                <!-- Sugar Intake -->
                <div class="card">
                    <h2>üç≠ Sugar Intake Today</h2>
                    
                    <div class="form-group">
                        <label for="total-sugar">Total sugar consumed (grams)</label>
                        <input type="number" id="total-sugar" min="0" step="0.1" placeholder="Enter total grams of sugar">
                        <div class="helper">
                            <strong>üí° Examples:</strong> 1 soda = 39g ‚Ä¢ 1 chocolate bar = 24g ‚Ä¢ 1 donut = 10g ‚Ä¢ 1 cup juice = 20g
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="sugar-type">Type of sugar consumed</label>
                        <select id="sugar-type">
                            <option value="mixed" selected>üç´üçé Mixed (added sugars + some fruit)</option>
                            <option value="added">üç¨ Mostly added sugars (candy, soda, desserts)</option>
                            <option value="fruit">üçé Mostly from whole fruits</option>
                        </select>
                    </div>
                    
                    <div class="helper">
                        <strong>üßÆ Quick Add:</strong>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.5rem; margin-top: 0.5rem;">
                            <button type="button" class="btn btn-secondary" onclick="addSugar(39)" style="padding: 0.5rem; font-size: 0.875rem;">ü•§ Soda (39g)</button>
                            <button type="button" class="btn btn-secondary" onclick="addSugar(24)" style="padding: 0.5rem; font-size: 0.875rem;">üç´ Chocolate (24g)</button>
                            <button type="button" class="btn btn-secondary" onclick="addSugar(10)" style="padding: 0.5rem; font-size: 0.875rem;">üç© Donut (10g)</button>
                            <button type="button" class="btn btn-secondary" onclick="addSugar(20)" style="padding: 0.5rem; font-size: 0.875rem;">üßÉ Juice (20g)</button>
                        </div>
                    </div>
                    
                    <div class="helper">
                        <strong>üí° Converter:</strong> 1 teaspoon sugar = 4g
                        <div class="converter">
                            <input type="number" id="tsp-input" placeholder="Teaspoons" min="0" step="0.25">
                            <span>‚Üí</span>
                            <input type="number" id="grams-output" placeholder="Grams" readonly>
                        </div>
                    </div>
                </div>
                
                <!-- Calculate Button -->
                <div class="card">
                    <div class="button-group">
                        <button type="button" class="btn btn-primary" onclick="calculate(); loadAd();">üíß Get My Hydration Plan</button>
                        <button type="button" class="btn btn-secondary" onclick="clearAll()">üîÑ Reset</button>
                    </div>
                </div>
            </div>
            
            
            <!-- Results -->
            <div class="results" id="results">
                <h3>üíß Your Personalized Hydration Plan</h3>
                <div id="results-content"></div>
                <div id="age-advice"></div>
                <div id="energy-warning"></div>
                <div id="daily-summary"></div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">
                    üíß Daily Water Calculator - Stay hydrated, stay healthy!
                </p>
                <p class="footer-disclaimer">
                    <a href="/privacy">Privacy Policy</a> | <a href="/about">About Us</a> | <a href="/contact">Contact Us</a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        function loadAd() {
            // Ad script is already loaded above
        }

        function triggerPopunderAd() {
            // Trigger the popunder ad script
            try {
                // The popunder script is already loaded, this will trigger it
                if (window.document) {
                    // Ads removed
                }
            } catch (error) {
                console.log('Ad trigger error:', error);
            }
        }
        
        // Add sugar from quick buttons
        function addSugar(amount) {
            const totalSugarInput = document.getElementById('total-sugar');
            const currentValue = parseFloat(totalSugarInput.value) || 0;
            totalSugarInput.value = (currentValue + amount).toFixed(1);
        }

        // Teaspoon converter
        document.getElementById('tsp-input').addEventListener('input', function() {
            const tsp = parseFloat(this.value) || 0;
            const grams = tsp * 4;
            document.getElementById('grams-output').value = grams.toFixed(1);
            
            if (grams > 0) {
                document.getElementById('total-sugar').value = grams.toFixed(1);
            }
        });

        function getAgeGuidelines(ageGroup) {
            const guidelines = {
                child: { max: 25, name: "children" },
                teen: { max: 30, name: "teens" },
                adult: { max: 25, name: "adults" },
                senior: { max: 20, name: "seniors" }
            };
            return guidelines[ageGroup] || guidelines.adult;
        }

        function getActivityMultiplier(activityLevel) {
            const multipliers = {
                sedentary: 1.0,
                moderate: 1.1,
                active: 1.3
            };
            return multipliers[activityLevel] || 1.1;
        }

        function getSugarTypeMultiplier(sugarType) {
            const multipliers = {
                added: 1.2,    // Added sugars need more water
                mixed: 1.0,    // Mixed is baseline
                fruit: 0.7     // Whole fruits provide some hydration
            };
            return multipliers[sugarType] || 1.0;
        }

        function calculate() {
            const weight = parseFloat(document.getElementById('weight').value);
            const ageGroup = document.getElementById('age-group').value;
            const activityLevel = document.getElementById('activity-level').value;
            const mealTiming = document.getElementById('meal-timing').value;
            const poorSleep = document.getElementById('poor-sleep').checked;
            const sugar = parseFloat(document.getElementById('total-sugar').value) || 0;
            const sugarType = document.getElementById('sugar-type').value;
            
            if (!weight || weight < 20 || !ageGroup) {
                alert('Please enter valid weight and age group');
                return;
            }
            
            // Trigger popunder ad first
            triggerPopunderAd();
            
            // Get age-specific guidelines
            const ageInfo = getAgeGuidelines(ageGroup);
            
            // Base water calculation: 35ml per kg
            let baseWater = weight * 35;
            
            // Activity multiplier
            const activityMultiplier = getActivityMultiplier(activityLevel);
            baseWater *= activityMultiplier;
            
            // Sugar type multiplier
            const sugarMultiplier = getSugarTypeMultiplier(sugarType);
            
            // Extra water for sugar: 4ml per gram, adjusted for type
            let extraWater = sugar * 4 * sugarMultiplier;
            
            // Timing adjustment - evening sugar needs more water
            if (mealTiming === 'evening') {
                extraWater *= 1.2;
            }
            
            // Poor sleep adjustment
            if (poorSleep) {
                extraWater *= 1.15;
                baseWater *= 1.05;
            }
            
            const totalWater = baseWater + extraWater;
            const glasses = totalWater / 250; // 250ml glasses
            const cups = totalWater / 237; // US cups
            
            // Generate results
            displayResults(weight, ageGroup, ageInfo, sugar, totalWater, extraWater, glasses, cups, activityLevel, mealTiming, poorSleep, sugarType);
        }

        function displayResults(weight, ageGroup, ageInfo, sugar, totalWater, extraWater, glasses, cups, activityLevel, mealTiming, poorSleep, sugarType) {
            // Main results
            const contentDiv = document.getElementById('results-content');
            contentDiv.innerHTML = `
                <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #0ea5e9;">${Math.round(totalWater)}ml</div>
                        <div style="color: #64748b;">Total Water Target</div>
                        <div style="font-size: 0.875rem; color: #64748b; margin-top: 0.25rem;">That's about ${Math.round(glasses)} glasses</div>
                    </div>
                    <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #d97706;">+${Math.round(extraWater)}ml</div>
                        <div style="color: #64748b;">Extra for Sugar</div>
                        <div style="font-size: 0.875rem; color: #64748b; margin-top: 0.25rem;">About ${(extraWater/250).toFixed(1)} extra glasses</div>
                    </div>
                    <div style="background: #dcfce7; padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #16a34a;">${sugar.toFixed(1)}g</div>
                        <div style="color: #64748b;">Sugar Consumed</div>
                        <div style="font-size: 0.875rem; color: #64748b; margin-top: 0.25rem;">‚âà ${(sugar/4).toFixed(1)} teaspoons</div>
                    </div>
                </div>
            `;
            
            // Age-specific advice
            const ageAdviceDiv = document.getElementById('age-advice');
            const sugarStatus = sugar > ageInfo.max ? "above" : sugar > ageInfo.max * 0.8 ? "near" : "within";
            const statusColor = sugarStatus === "above" ? "#dc2626" : sugarStatus === "near" ? "#d97706" : "#16a34a";
            
            ageAdviceDiv.innerHTML = `
                <div class="tip-box" style="border-color: ${statusColor}; color: ${statusColor === "#16a34a" ? "#166534" : statusColor === "#d97706" ? "#92400e" : "#991b1b"};">
                    <h4 style="margin-bottom: 0.5rem;">üìä Age-Specific Guidance</h4>
                    <p><strong>Recommended for ${ageInfo.name}:</strong> Less than ${ageInfo.max}g sugar daily</p>
                    <p><strong>Your intake:</strong> ${sugar.toFixed(1)}g (${sugarStatus} recommended limit)</p>
                    ${ageGroup === 'senior' ? '<p><em>üí° Seniors may need extra water for optimal kidney function.</em></p>' : ''}
                    ${ageGroup === 'child' ? '<p><em>üí° Kids are more sensitive to sugar spikes - balance with protein and water.</em></p>' : ''}
                </div>
            `;
            
            // Energy & mood warning
            const energyDiv = document.getElementById('energy-warning');
            let energyWarning = '';
            
            if (sugar > 30) {
                energyWarning = `
                    <div class="warning-box">
                        <h4 style="margin-bottom: 0.5rem;">‚ö° Energy & Mood Alert</h4>
                        <p>High sugar intake (${sugar.toFixed(1)}g) can cause:</p>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>Energy spike followed by a crash</li>
                            <li>Mood swings and irritability</li>
                            <li>Increased thirst and dehydration</li>
                        </ul>
                        <p><strong>üí° Balance with:</strong> Protein, fiber, and extra water throughout the day.</p>
                        ${poorSleep ? '<p><em>Poor sleep + high sugar can worsen fatigue - prioritize hydration!</em></p>' : ''}
                    </div>
                `;
            } else if (sugar > 15) {
                energyWarning = `
                    <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem; margin: 1rem 0; color: #92400e;">
                        <h4 style="margin-bottom: 0.5rem;">‚ö° Energy Note</h4>
                        <p>Moderate sugar intake may give you a quick energy boost. Stay hydrated to maintain steady energy levels.</p>
                    </div>
                `;
            }
            
            // Add activity boost message
            if (activityLevel === 'active') {
                energyWarning += `
                    <div class="tip-box">
                        <h4 style="margin-bottom: 0.5rem;">üèãÔ∏è Activity Boost</h4>
                        <p>Since you're active, your body processes sugar faster and needs more water. Added an extra 30% to your target!</p>
                    </div>
                `;
            }
            
            energyDiv.innerHTML = energyWarning;
            
            // Daily summary
            const summaryDiv = document.getElementById('daily-summary');
            const timingAdvice = mealTiming === 'evening' ? 
                'Evening sugar can affect sleep - try to finish sweet treats 3+ hours before bed.' : 
                mealTiming === 'morning' ? 
                'Good timing! Morning sugar gives you energy for the day ahead.' :
                'Afternoon treats are fine - just stay hydrated for the rest of the day.';
                
            const changeAdvice = sugar > ageInfo.max ? 
                `Small change: Replace one sugary drink with sparkling water = save ~10 teaspoons (40g) sugar!` :
                'You\'re doing great with sugar intake! Keep it balanced with plenty of water.';
            
            summaryDiv.innerHTML = `
                <div class="summary-box">
                    <h4 style="margin-bottom: 1rem; color: #0ea5e9;">üìù Your Daily Summary</h4>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <p><strong>Today:</strong> ${sugar.toFixed(1)}g sugar (‚âà${(sugar/4).toFixed(1)} teaspoons) ‚Üí <strong>Target: ${Math.round(glasses)} glasses water</strong></p>
                        <p style="margin-top: 0.5rem;"><strong>Timing:</strong> ${timingAdvice}</p>
                    </div>
                    <div style="background: #e0f2fe; padding: 1rem; border-radius: 8px;">
                        <p style="margin: 0;"><strong>üí° ${changeAdvice}</strong></p>
                    </div>
                </div>
            `;
            
            document.getElementById('results').classList.add('show');
        }

        function clearAll() {
            document.getElementById('weight').value = '';
            document.getElementById('age-group').value = '';
            document.getElementById('activity-level').value = 'moderate';
            document.getElementById('meal-timing').value = 'afternoon';
            document.getElementById('poor-sleep').checked = false;
            document.getElementById('total-sugar').value = '';
            document.getElementById('sugar-type').value = 'mixed';
            document.getElementById('tsp-input').value = '';
            document.getElementById('grams-output').value = '';
            document.getElementById('results').classList.remove('show');
        }

        // Navigation toggle functionality (responsive)
        function toggleNavigation() {
            const sideNav = document.getElementById('sideNav');
            const navToggle = document.getElementById('navToggle');
            const body = document.body;
            
            // For mobile (768px and below)
            if (window.innerWidth <= 768) {
                if (sideNav.classList.contains('open')) {
                    sideNav.classList.remove('open');
                    navToggle.classList.remove('active');
                } else {
                    sideNav.classList.add('open');
                    navToggle.classList.add('active');
                }
            } else {
                // For desktop/tablet
                if (sideNav.classList.contains('closed')) {
                    sideNav.classList.remove('closed');
                    body.classList.remove('nav-closed');
                    navToggle.classList.remove('active');
                } else {
                    sideNav.classList.add('closed');
                    body.classList.add('nav-closed');
                    navToggle.classList.add('active');
                }
            }
        }
        
        // Close navigation function (for close button)
        function closeNavigation() {
            const sideNav = document.getElementById('sideNav');
            const navToggle = document.getElementById('navToggle');
            const body = document.body;
            
            if (window.innerWidth <= 768) {
                // Mobile: close navigation
                sideNav.classList.remove('open');
                navToggle.classList.remove('active');
            } else {
                // Desktop: close navigation
                sideNav.classList.add('closed');
                body.classList.add('nav-closed');
                navToggle.classList.add('active');
            }
        }
        
        // Initialize navigation state based on screen size
        function initializeNavigation() {
            const sideNav = document.getElementById('sideNav');
            const navToggle = document.getElementById('navToggle');
            const body = document.body;
            
            if (window.innerWidth <= 768) {
                // Mobile: navigation hidden by default
                sideNav.classList.remove('closed', 'open');
                body.classList.remove('nav-closed');
                navToggle.classList.remove('active');
            } else {
                // Desktop: navigation visible by default
                sideNav.classList.remove('closed', 'open');
                body.classList.remove('nav-closed');
                navToggle.classList.remove('active');
            }
        }

        // Close navigation when clicking outside on mobile
        document.addEventListener('click', function(e) {
            const sideNav = document.getElementById('sideNav');
            const navToggle = document.getElementById('navToggle');
            
            if (window.innerWidth <= 768 && 
                sideNav.classList.contains('open') && 
                !sideNav.contains(e.target) && 
                !navToggle.contains(e.target)) {
                sideNav.classList.remove('open');
                navToggle.classList.remove('active');
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            initializeNavigation();
        });

        // Initialize navigation when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
        });
    </script>
</body>
</html>